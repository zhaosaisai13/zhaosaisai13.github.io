<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><title>Docker使用最很详细的学习 | Hexo</title><meta name="keywords" content="Docker"><meta name="author" content="John Doe"><meta name="copyright" content="John Doe"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="应为Docker这个还是很长的一个东西，我怕以后忘了就习惯性写成了笔记 他的官方https:&#x2F;&#x2F;www.docker.com&#x2F;官方手册地址很详细的https:&#x2F;&#x2F;docs.docker.com&#x2F;官方文档非常详细https:&#x2F;&#x2F;docs.docker.com&#x2F;engine看的视频https:&#x2F;&#x2F;www.bilibili.com&#x2F;video&#x2F;BV1sK4y1s7Cj看的视频https:&#x2F;&#x2F;www.bi">
<meta property="og:type" content="article">
<meta property="og:title" content="Docker使用最很详细的学习">
<meta property="og:url" content="https://github.com/Zhao-sai-sai/Blog-test.github.io.git/2020/12/16/Docker%E7%9A%84%E5%AD%A6%E4%B9%A0/index.html">
<meta property="og:site_name" content="Hexo">
<meta property="og:description" content="应为Docker这个还是很长的一个东西，我怕以后忘了就习惯性写成了笔记 他的官方https:&#x2F;&#x2F;www.docker.com&#x2F;官方手册地址很详细的https:&#x2F;&#x2F;docs.docker.com&#x2F;官方文档非常详细https:&#x2F;&#x2F;docs.docker.com&#x2F;engine看的视频https:&#x2F;&#x2F;www.bilibili.com&#x2F;video&#x2F;BV1sK4y1s7Cj看的视频https:&#x2F;&#x2F;www.bi">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://gitee.com/wZass/zp/raw/master/img/20201209201844.png">
<meta property="article:published_time" content="2020-12-16T12:17:00.000Z">
<meta property="article:modified_time" content="2021-08-09T03:12:55.444Z">
<meta property="article:author" content="John Doe">
<meta property="article:tag" content="Docker">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://gitee.com/wZass/zp/raw/master/img/20201209201844.png"><link rel="shortcut icon" href="/Zhao-sai-sai/Blog-test.github.io.git/img/favicon.png"><link rel="canonical" href="https://github.com/Zhao-sai-sai/Blog-test.github.io.git/2020/12/16/Docker%E7%9A%84%E5%AD%A6%E4%B9%A0/"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="stylesheet" href="/Zhao-sai-sai/Blog-test.github.io.git/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css" media="print" onload="this.media='all'"><script>const GLOBAL_CONFIG = { 
  root: '/Zhao-sai-sai/Blog-test.github.io.git/',
  algolia: undefined,
  localSearch: undefined,
  translate: undefined,
  noticeOutdate: undefined,
  highlight: {"plugin":"highlighjs","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":false},
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: '',
  date_suffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: undefined,
  lightbox: 'fancybox',
  Snackbar: undefined,
  source: {
    jQuery: 'https://cdn.jsdelivr.net/npm/jquery@latest/dist/jquery.min.js',
    justifiedGallery: {
      js: 'https://cdn.jsdelivr.net/npm/justifiedGallery/dist/js/jquery.justifiedGallery.min.js',
      css: 'https://cdn.jsdelivr.net/npm/justifiedGallery/dist/css/justifiedGallery.min.css'
    },
    fancybox: {
      js: 'https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.js',
      css: 'https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.css'
    }
  },
  isPhotoFigcaption: false,
  islazyload: false,
  isanchor: false
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: 'Docker使用最很详细的学习',
  isPost: true,
  isHome: false,
  isHighlightShrink: false,
  isToc: true,
  postUpdate: '2021-08-09 11:12:55'
}</script><noscript><style type="text/css">
  #nav {
    opacity: 1
  }
  .justified-gallery img {
    opacity: 1
  }

  #recent-posts time,
  #post-meta time {
    display: inline !important
  }
</style></noscript><script>(win=>{
    win.saveToLocal = {
      set: function setWithExpiry(key, value, ttl) {
        if (ttl === 0) return
        const now = new Date()
        const expiryDay = ttl * 86400000
        const item = {
          value: value,
          expiry: now.getTime() + expiryDay,
        }
        localStorage.setItem(key, JSON.stringify(item))
      },

      get: function getWithExpiry(key) {
        const itemStr = localStorage.getItem(key)

        if (!itemStr) {
          return undefined
        }
        const item = JSON.parse(itemStr)
        const now = new Date()

        if (now.getTime() > item.expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return item.value
      }
    }
  
    win.getScript = url => new Promise((resolve, reject) => {
      const script = document.createElement('script')
      script.src = url
      script.async = true
      script.onerror = reject
      script.onload = script.onreadystatechange = function() {
        const loadState = this.readyState
        if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
        script.onload = script.onreadystatechange = null
        resolve()
      }
      document.head.appendChild(script)
    })
  
      win.activateDarkMode = function () {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      win.activateLightMode = function () {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }
      const t = saveToLocal.get('theme')
    
          if (t === 'dark') activateDarkMode()
          else if (t === 'light') activateLightMode()
        
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    
    const fontSizeVal = saveToLocal.get('global-font-size')
    if (fontSizeVal !== undefined) {
      document.documentElement.style.setProperty('--global-font-size', fontSizeVal + 'px')
    }
    
    const detectApple = () => {
      if (GLOBAL_CONFIG_SITE.isHome && /iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)){
        document.documentElement.classList.add('apple')
      }
    }
    detectApple()
    })(window)</script><meta name="generator" content="Hexo 5.4.0"></head><body><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img is-center"><img src="https://i.loli.net/2021/02/24/5O1day2nriDzjSu.png" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="site-data"><div class="data-item is-center"><div class="data-item-link"><a href="/Zhao-sai-sai/Blog-test.github.io.git/archives/"><div class="headline">文章</div><div class="length-num">143</div></a></div></div><div class="data-item is-center"><div class="data-item-link"><a href="/Zhao-sai-sai/Blog-test.github.io.git/tags/"><div class="headline">标签</div><div class="length-num">38</div></a></div></div><div class="data-item is-center"><div class="data-item-link"><a href="/Zhao-sai-sai/Blog-test.github.io.git/categories/"><div class="headline">分类</div><div class="length-num">59</div></a></div></div></div><hr/><div class="menus_items"><div class="menus_item"><a class="site-page" href="/Zhao-sai-sai/Blog-test.github.io.git/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/Zhao-sai-sai/Blog-test.github.io.git/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div></div></div></div><div class="post" id="body-wrap"><header class="not-top-img" id="page-header"><nav id="nav"><span id="blog_name"><a id="site-name" href="/Zhao-sai-sai/Blog-test.github.io.git/">Hexo</a></span><div id="menus"><div class="menus_items"><div class="menus_item"><a class="site-page" href="/Zhao-sai-sai/Blog-test.github.io.git/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/Zhao-sai-sai/Blog-test.github.io.git/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div></div><div id="toggle-menu"><a class="site-page"><i class="fas fa-bars fa-fw"></i></a></div></div></nav></header><main class="layout" id="content-inner"><div id="post"><div id="post-info"><h1 class="post-title">Docker使用最很详细的学习</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">发表于</span><time class="post-meta-date-created" datetime="2020-12-16T12:17:00.000Z" title="发表于 2020-12-16 20:17:00">2020-12-16</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2021-08-09T03:12:55.444Z" title="更新于 2021-08-09 11:12:55">2021-08-09</time></span><span class="post-meta-categories"><span class="post-meta-separator">|</span><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/Zhao-sai-sai/Blog-test.github.io.git/categories/Docker%E5%AE%B9%E5%99%A8/">Docker容器</a></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-pv-cv" id="" data-flag-title="Docker使用最很详细的学习"><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">阅读量:</span><span id="busuanzi_value_page_pv"></span></span></div></div></div><article class="post-content" id="article-container"><p><strong>应为Docker这个还是很长的一个东西，我怕以后忘了就习惯性写成了笔记</strong></p>
<p><strong>他的官方</strong><a target="_blank" rel="noopener" href="https://www.docker.com/">https://www.docker.com/</a><br><strong>官方手册地址很详细的</strong><a target="_blank" rel="noopener" href="https://docs.docker.com/">https://docs.docker.com/</a><br><strong>官方文档非常详细</strong><a target="_blank" rel="noopener" href="https://docs.docker.com/engine">https://docs.docker.com/engine</a><br><strong>看的视频</strong><a target="_blank" rel="noopener" href="https://www.bilibili.com/video/BV1sK4y1s7Cj">https://www.bilibili.com/video/BV1sK4y1s7Cj</a><br><strong>看的视频</strong><a target="_blank" rel="noopener" href="https://www.bilibili.com/video/BV1og4y1q7M4">https://www.bilibili.com/video/BV1og4y1q7M4</a><br><strong>参考的文章</strong><a target="_blank" rel="noopener" href="https://www.jianshu.com/p/d3006b8a22ee">https://www.jianshu.com/p/d3006b8a22ee</a><br><strong>参考的文章</strong><a target="_blank" rel="noopener" href="https://www.runoob.com/docker/docker-tutorial.html">https://www.runoob.com/docker/docker-tutorial.html</a><br><strong>参考的文章</strong><a target="_blank" rel="noopener" href="https://www.cnblogs.com/dazhoushuoceshi/p/7066041.html">https://www.cnblogs.com/dazhoushuoceshi/p/7066041.html</a></p>
<h2 id="什么是Docker"><a href="#什么是Docker" class="headerlink" title="什么是Docker"></a>什么是Docker</h2><p>Docker 是一个开源的应用容器引擎</p>
<p>他可以解决环境不一致，叫整个环境打包成一个集装箱，然后别人下载下来运行就不会出错了</p>
<p>容器是完全使用沙箱机制，就是隔离型，他运行的时候会在Linux内核里面开辟一个空间，这个空间不会影响其他的东西</p>
<p>虚拟机会站很大的空间，虚拟机会创建一个内核，</p>
<h2 id="Docker与虚拟机的区别"><a href="#Docker与虚拟机的区别" class="headerlink" title="Docker与虚拟机的区别"></a>Docker与虚拟机的区别</h2><p>docker有着比虚拟机更少的抽象层<br>Docker用的是物理机的内核<br>vm是自己创建一个内核环境会变的很慢</p>
<h2 id="Docker的安装"><a href="#Docker的安装" class="headerlink" title="Docker的安装"></a>Docker的安装</h2><p>他有Docker-ce版本的介绍社区版本的和Docker-ee企业版本</p>
<p>kali安装运行下面这个命令就可以直接安装</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">apt install docker.io</span><br></pre></td></tr></table></figure>
<p><img src="https://gitee.com/wZass/zp/raw/master/img/20201209104838.png"></p>
<p>如果是其他的linux可以用下面这个命令安装</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">curl -s https://get.docker.com/ | sh</span><br></pre></td></tr></table></figure>
<h2 id="Docker的卸载"><a href="#Docker的卸载" class="headerlink" title="Docker的卸载"></a>Docker的卸载</h2><p>卸载依赖</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo yum remove docker-ce docker-ce-cli containerd.io</span><br></pre></td></tr></table></figure>
<p>卸载资源</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo rm -rf /var/lib/docker</span><br></pre></td></tr></table></figure>

<h2 id="启动Docker"><a href="#启动Docker" class="headerlink" title="启动Docker"></a>启动Docker</h2><p>命令</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">systemctl start docker</span><br></pre></td></tr></table></figure>
<p><strong>查看是否启动成功</strong><br>命令</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker version  </span><br></pre></td></tr></table></figure>
<p><img src="https://gitee.com/wZass/zp/raw/master/img/20201209161443.png"></p>
<p><strong>可以运行一下helloworld</strong><br>命令</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker run hello-world </span><br></pre></td></tr></table></figure>
<p><img src="https://gitee.com/wZass/zp/raw/master/img/20201209161652.png"></p>
<h2 id="Docker-镜像加速"><a href="#Docker-镜像加速" class="headerlink" title="Docker 镜像加速"></a>Docker 镜像加速</h2><p>地址有</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">https://hub.docker.com/     //官方</span><br><span class="line">https://reg-mirror.qiniu.com   //七牛云</span><br><span class="line">https://hub-mirror.c.163.com   //网易云</span><br><span class="line">https://registry.docker-cn.com  //Docker中国区官方镜</span><br><span class="line">https://cr.console.aliyun.com/  //阿里云</span><br><span class="line">​http://hub.daocloud.io(推荐使用)  //daoCloud</span><br></pre></td></tr></table></figure>
<p><code>/etc/docker/daemon.json</code>在这个文件里面添加下面的代码，如果没有文件创建一个文件</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="attr">&quot;registry-mirrors&quot;</span>: [</span><br><span class="line">    <span class="string">&quot;https://docker.mirrors.ustc.edu.cn&quot;</span>,</span><br><span class="line">    <span class="string">&quot;https://hub-mirror.c.163.com&quot;</span></span><br><span class="line">  ]</span><br><span class="line">&#125;</span><br><span class="line">---</span><br></pre></td></tr></table></figure>

<p>查看有没有配置好<br><strong>重启docker</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">systemctl restart docker</span><br></pre></td></tr></table></figure>
<p>重启完运行下面这个命令</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker info</span><br></pre></td></tr></table></figure>
<p>出现下面出现这个就成功了<br><img src="https://gitee.com/wZass/zp/raw/master/img/20201209160628.png"></p>
<h2 id="docker镜像基础命令"><a href="#docker镜像基础命令" class="headerlink" title="docker镜像基础命令"></a>docker镜像基础命令</h2><p>他的官方命令说明<a target="_blank" rel="noopener" href="https://docs.docker.com/reference/">https://docs.docker.com/reference/</a></p>
<p><img src="https://gitee.com/wZass/zp/raw/master/img/20201209164624.png"></p>
<table>
<thead>
<tr>
<th align="center">参数</th>
<th align="right">作用</th>
</tr>
</thead>
<tbody><tr>
<td align="center"><code>images</code></td>
<td align="right">查看已经下载的镜像</td>
</tr>
<tr>
<td align="center"><code>search</code></td>
<td align="right">进行搜索镜像</td>
</tr>
<tr>
<td align="center"><code>pull</code></td>
<td align="right">下载镜像</td>
</tr>
<tr>
<td align="center"><code>rmi</code></td>
<td align="right">卸载镜像</td>
</tr>
<tr>
<td align="center"><code>save</code></td>
<td align="right">用<code>-o</code>参数导出镜像</td>
</tr>
<tr>
<td align="center"><code>load</code></td>
<td align="right">用<code>-i</code>进行导入镜像</td>
</tr>
<tr>
<td align="center"><code>tag</code></td>
<td align="right">修改镜像信息</td>
</tr>
</tbody></table>
<p>查看他的命令可以用</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">man docker</span><br></pre></td></tr></table></figure>
<p>和</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker --help</span><br></pre></td></tr></table></figure>
<p>如果命令的参数不会用可以用</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker 参数命令 --help</span><br></pre></td></tr></table></figure>
<p>列</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker images --help</span><br></pre></td></tr></table></figure>
<p><img src="https://gitee.com/wZass/zp/raw/master/img/20201209171029.png"></p>
<h3 id="pull下载镜像"><a href="#pull下载镜像" class="headerlink" title="pull下载镜像"></a>pull下载镜像</h3><p>命令<br>如果不指定他默认会去你配置的进行库去下载</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker pull 要下载镜像的名</span><br></pre></td></tr></table></figure>
<p>指定版本下载<br>下面下载的是php的7.1版本</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker pull php:7.1</span><br></pre></td></tr></table></figure>

<p>指定目录进行下载，<br>下载命令</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker pull 下载的拉取命令</span><br></pre></td></tr></table></figure>
<p>事例<br>比如下面这个地址<a target="_blank" rel="noopener" href="http://hub.daocloud.io/">http://hub.daocloud.io</a><br>下面是php<br><img src="https://gitee.com/wZass/zp/raw/master/img/20201209201047.png"><br><img src="https://gitee.com/wZass/zp/raw/master/img/20201209201133.png"></p>
<p>拉取命令是<code>daocloud.io/library/php:7.4-alpine</code><br>进行下载<br>命令</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker pull  daocloud.io/library/php:7.4-alpine</span><br></pre></td></tr></table></figure>
<p>可以看见已经下载好了<br><img src="https://gitee.com/wZass/zp/raw/master/img/20201209201558.png"></p>
<h3 id="rmi卸载镜像"><a href="#rmi卸载镜像" class="headerlink" title="rmi卸载镜像"></a>rmi卸载镜像</h3><p><strong>查看镜像ID</strong><br>命令</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker images</span><br></pre></td></tr></table></figure>
<p>结果<br><img src="https://gitee.com/wZass/zp/raw/master/img/20201209193641.png"></p>
<p><strong>rmi卸载镜像</strong><br>命令</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker rmi -f 要删除镜像的ID</span><br></pre></td></tr></table></figure>
<p>咧<br>命令</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker rmi -f bf756fb1ae65</span><br></pre></td></tr></table></figure>
<p>可以看见删除成功<br><img src="https://gitee.com/wZass/zp/raw/master/img/20201209193837.png"></p>
<h3 id="images查看已经下载的镜像"><a href="#images查看已经下载的镜像" class="headerlink" title="images查看已经下载的镜像"></a>images查看已经下载的镜像</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker images</span><br></pre></td></tr></table></figure>
<p><img src="https://gitee.com/wZass/zp/raw/master/img/20201209162017.png"></p>
<p>他的表示的意思</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">REPOSITORY   镜像的仓库源</span><br><span class="line">TAG           镜像的标签</span><br><span class="line">IMAGE ID      镜像的ID</span><br><span class="line">CREATED       镜像的创建时间</span><br><span class="line">SIZE          镜像的大小</span><br></pre></td></tr></table></figure>
<p><strong>他的可选参数</strong><br>常用的</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">-a, --all  列出所以镜像</span><br><span class="line">-q, --quiet   只显示镜像ID</span><br></pre></td></tr></table></figure>
<p>下面咧</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker images -q  </span><br></pre></td></tr></table></figure>
<p><img src="https://gitee.com/wZass/zp/raw/master/img/20201209171819.png"></p>
<h3 id="search进行搜索镜像"><a href="#search进行搜索镜像" class="headerlink" title="search进行搜索镜像"></a>search进行搜索镜像</h3><p>命令</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker search  要搜索的景象名</span><br></pre></td></tr></table></figure>
<p>测试<br>命令</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker  search mysql</span><br></pre></td></tr></table></figure>
<p><img src="https://gitee.com/wZass/zp/raw/master/img/20201209172718.png"></p>
<p><strong>可选参数</strong><br>查看可选参数<br>命令</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker  search  --help </span><br></pre></td></tr></table></figure>
<p><img src="https://gitee.com/wZass/zp/raw/master/img/20201209173003.png"><br>进行过滤</p>
<h3 id="镜像的导入导出"><a href="#镜像的导入导出" class="headerlink" title="镜像的导入导出"></a>镜像的导入导出</h3><p>比如有的镜像下载不下来，我们就可以用别人导出的镜像进行安装</p>
<h4 id="镜像的导出、"><a href="#镜像的导出、" class="headerlink" title="镜像的导出、"></a>镜像的导出、</h4><p>格式</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker save -o   要导出的路径   镜像的ID</span><br></pre></td></tr></table></figure>
<p><strong>实咧</strong><br>查看现在我的都是有什么镜像文件命令<code>docker images</code><br><img src="https://gitee.com/wZass/zp/raw/master/img/20201210080832.png"><br>我就叫那个php给导出出来<br>命令</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker save -o  /root/php.image e7ddddb9c714</span><br></pre></td></tr></table></figure>
<p><img src="https://gitee.com/wZass/zp/raw/master/img/20201210081112.png"></p>
<p>查看一下文件可以看见已经导出成功了<br><img src="https://gitee.com/wZass/zp/raw/master/img/20201210081204.png"></p>
<h4 id="镜像的导入"><a href="#镜像的导入" class="headerlink" title="镜像的导入"></a>镜像的导入</h4><p>格式</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker load -i  镜像的文件</span><br></pre></td></tr></table></figure>
<p><strong>实咧</strong><br>我叫那个php给删除命令<code>docker rmi -f  要删除的ID</code><br>我导入上面那个已经导入出来的php<br>命令</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker load -i /root/php.image</span><br></pre></td></tr></table></figure>
<p>可以看见导入成功<br><img src="https://gitee.com/wZass/zp/raw/master/img/20201210082031.png"></p>
<h3 id="修改镜像信息"><a href="#修改镜像信息" class="headerlink" title="修改镜像信息"></a>修改镜像信息</h3><p>可以看见我们导入的他没有名字和版本<br><img src="https://gitee.com/wZass/zp/raw/master/img/20201210082154.png"><br>格式<br>下面一个<code>:</code>就代表下一个信息</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker tag 进行的ID 要修改的名字:版本号:...:....:....</span><br></pre></td></tr></table></figure>
<p>事例<br>命令</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker tag e7ddddb9c714  php:7.1</span><br></pre></td></tr></table></figure>
<p>可以看见修改成功</p>
<p><img src="https://gitee.com/wZass/zp/raw/master/img/20201210082546.png"></p>
<h2 id="docker容器的命令"><a href="#docker容器的命令" class="headerlink" title="docker容器的命令"></a>docker容器的命令</h2><table>
<thead>
<tr>
<th align="center">参数</th>
<th align="right">作用</th>
</tr>
</thead>
<tbody><tr>
<td align="center"><code>run</code></td>
<td align="right">运行镜像</td>
</tr>
<tr>
<td align="center"><code>ps</code></td>
<td align="right">查看正在运行的容器</td>
</tr>
<tr>
<td align="center"><code>attach</code></td>
<td align="right">启动后进入容器</td>
</tr>
<tr>
<td align="center"><code>exit</code></td>
<td align="right">退出容器，这个退出之后容器也会停止</td>
</tr>
<tr>
<td align="center"><code>Ctrl+P+Q</code></td>
<td align="right">这样退出容器不会停止运行</td>
</tr>
<tr>
<td align="center"><code>start</code></td>
<td align="right">启动容器</td>
</tr>
<tr>
<td align="center"><code>stop</code></td>
<td align="right">停止容器</td>
</tr>
<tr>
<td align="center"><code>restart</code></td>
<td align="right">重启容器</td>
</tr>
<tr>
<td align="center"><code>kill</code></td>
<td align="right">强制关闭容器</td>
</tr>
<tr>
<td align="center"><code>rm</code></td>
<td align="right">删除容器</td>
</tr>
<tr>
<td align="center"><code>logs</code></td>
<td align="right">查看日志</td>
</tr>
</tbody></table>
<table>
<thead>
<tr>
<th align="center">run的可选参数</th>
<th align="right">作用</th>
</tr>
</thead>
<tbody><tr>
<td align="center"><code>--name</code></td>
<td align="right">指定容器的名称</td>
</tr>
<tr>
<td align="center"><code>-it</code></td>
<td align="right">交互方法运行 主机可以进入</td>
</tr>
<tr>
<td align="center"><code>-d</code></td>
<td align="right">代表后台运行容器，-d和-it有冲突</td>
</tr>
<tr>
<td align="center"><code>-p</code></td>
<td align="right">为了映射当前Linux端口和容器端口</td>
</tr>
<tr>
<td align="center"><code>-P</code></td>
<td align="right">他会随机指定端口</td>
</tr>
</tbody></table>
<table>
<thead>
<tr>
<th align="center">ps的可选参数</th>
<th align="right">作用</th>
</tr>
</thead>
<tbody><tr>
<td align="center"><code>-a</code></td>
<td align="right">查看全部的容器，包括没有运行</td>
</tr>
<tr>
<td align="center"><code>-p</code></td>
<td align="right">只查看容器的ID</td>
</tr>
</tbody></table>
<table>
<thead>
<tr>
<th align="center">logs的可选参数</th>
<th align="right">作用</th>
</tr>
</thead>
<tbody><tr>
<td align="center"><code>-f</code></td>
<td align="right">可以滚动查看日志的最后几行</td>
</tr>
<tr>
<td align="center"><code>-t</code></td>
<td align="right">显示时间</td>
</tr>
</tbody></table>
<h3 id="简单运行"><a href="#简单运行" class="headerlink" title="简单运行"></a>简单运行</h3><p>在web是没有办法访问的<br>命令<br>下面这个运行如果没有他会下载在运行</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker run 镜像的标识/镜像名称:版本号</span><br></pre></td></tr></table></figure>
<h3 id="运行常用的参数"><a href="#运行常用的参数" class="headerlink" title="运行常用的参数"></a>运行常用的参数</h3><p>命令</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker run --name 容器名称  -it  -p 宿主机端口:容器端口   镜像的ID/镜像名称:版本号  /bin/bash</span><br></pre></td></tr></table></figure>
<p><code>--name</code> 容器名称：指定容器的名称<br><code>-it</code>    交互方法运行  主机可以进入<br><code>-d</code> 代表后台运行容器，上面我没有加应<code>-d</code>和<code>-it</code>有冲突<br><code>-p</code> 宿主机端口:容器端口：为了映射当前Linux端口和容器端口 ，他还有个<code>-P</code>他会随机指定端口<br><code>/bin/bash</code> 是运行控制台 载入容器后运行 ，docker中必须要保持一个进程的运行，要不然整个容器启动后就会马上kill itself，这个/bin/bash就表示启动容器后启动bash</p>
<p><strong>他的坑</strong><br>命令<br>下面这个命令是在后台启动，但是发现他没有启动而是关闭了<br>应为他没有前端启动所以启动后就关闭了</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker run -d 镜像的ID/镜像名称:版本号</span><br></pre></td></tr></table></figure>
<h3 id="查看正在运行的容器"><a href="#查看正在运行的容器" class="headerlink" title="查看正在运行的容器"></a>查看正在运行的容器</h3><p>用<code>ps</code>参数<br>命令<br>如果<code>ps</code>没有添加任何参数他会显示正在运行的容器</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker ps  </span><br></pre></td></tr></table></figure>
<p>可以看见下面启动了kali 容器<br><img src="https://gitee.com/wZass/zp/raw/master/img/20201210100101.png"><br><code>CONTAINER ID</code> 表示容器ID<br><code>IMAGE</code>         镜像ID<br><code>COMMAND</code>       执行的命令<br><code>CREATED</code>       已经建立的时间<br><code>STATUS</code>        状态<br><code>PORTS</code>         用的端口<br><code>NAMES</code>         容器名字<br><strong>ps还有可选参数</strong></p>
<p><strong>-a参数</strong><br>-a：查看全部的容器，包括没有运行<br>命令</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker ps -a</span><br></pre></td></tr></table></figure>
<p><img src="https://gitee.com/wZass/zp/raw/master/img/20201210100700.png"></p>
<p><strong>-p参数</strong><br>-q：只查看容器的ID<br>命令</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker ps -q </span><br></pre></td></tr></table></figure>
<p><img src="https://gitee.com/wZass/zp/raw/master/img/20201210100902.png"></p>
<p>命令</p>
<h3 id="进入容器"><a href="#进入容器" class="headerlink" title="进入容器"></a>进入容器</h3><p><strong>启动的时候直接进入容器</strong><br><strong>启动的时候直接进入容器添加-it和/bin/bash就可以直接进入容器</strong><br>命令</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker run  -it a1765e8e381e   /bin/bash</span><br></pre></td></tr></table></figure>
<p><code>-it</code>    交互方法运行  主机可以进入<br><code>a1765e8e381e</code> 是镜像ID<br><code>/bin/bash</code> 是运行控制台 载入容器后运行 ，docker中必须要保持一个进程的运行，要不然整个容器启动后就会马上kill itself，这个/bin/bash就表示启动容器后启动bash<br><img src="https://gitee.com/wZass/zp/raw/master/img/20201210095407.png"><br><strong>启动后进入容器</strong></p>
<p><strong>或者启动后用attach参数进入容器</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker attach 容器ID</span><br></pre></td></tr></table></figure>
<p><img src="https://gitee.com/wZass/zp/raw/master/img/20201210103651.png"></p>
<p><strong>还有一个exec参数进入容器</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker exec 容器ID   /bin/bash</span><br></pre></td></tr></table></figure>
<p><strong>attach和exec他两个区别</strong><br>exec   命令会开启新的终端<br>attach  这个会进入正在运行的终端</p>
<h3 id="退出容器"><a href="#退出容器" class="headerlink" title="退出容器"></a>退出容器</h3><p>在容器里面输入<code>exit</code>退出容器，这个退出之后容器也会停止</p>
<p>如果不行停止可以用<code>Ctrl+P+Q</code>，这样退出容器不会停止运行<br>可以看见他他还在运行<br><img src="https://gitee.com/wZass/zp/raw/master/img/20201210103236.png"></p>
<h3 id="启动和关闭容器"><a href="#启动和关闭容器" class="headerlink" title="启动和关闭容器"></a>启动和关闭容器</h3><p>如果我们关闭容器了<br>我们可以启动他里面的东西是不会变的</p>
<p><strong>重启容器</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker restart  容器ID</span><br></pre></td></tr></table></figure>
<p><strong>关闭容器</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker stop  容器ID</span><br></pre></td></tr></table></figure>
<p><strong>强制关闭容器</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker kill  容器ID</span><br></pre></td></tr></table></figure>
<p><strong>启动容器</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker start  容器ID</span><br></pre></td></tr></table></figure>
<p><strong>然后我们这进入容器看看</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker attach  容器ID</span><br></pre></td></tr></table></figure>
<p>可以看见已经进入了<br><img src="https://gitee.com/wZass/zp/raw/master/img/20201210104101.png"></p>
<h3 id="删除容器"><a href="#删除容器" class="headerlink" title="删除容器"></a>删除容器</h3><p>然后删除这个容器里面的东西就没有了和删除虚拟机一样</p>
<p><strong>停止指定的容器</strong><br>命令</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker stop 容器id</span><br></pre></td></tr></table></figure>
<p><strong>停止全部容器</strong><br>命令</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker stop $(docker pa -qa)</span><br></pre></td></tr></table></figure>
<p><strong>删除指定的容器</strong><br>命令</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker rm 容器id</span><br></pre></td></tr></table></figure>
<p><strong>删除全部容器</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker rm $(docker pa -qa)</span><br></pre></td></tr></table></figure>
<h3 id="查看日志"><a href="#查看日志" class="headerlink" title="查看日志"></a>查看日志</h3><p>命令</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker logs -f -t  容器ID</span><br></pre></td></tr></table></figure>
<p><code>-f</code>  可以滚动查看日志的最后几行<br><code>-t</code> 显示时间<br><img src="https://gitee.com/wZass/zp/raw/master/img/20201210113351.png"></p>
<h3 id="实咧下载和运行加进入容器"><a href="#实咧下载和运行加进入容器" class="headerlink" title="实咧下载和运行加进入容器"></a>实咧下载和运行加进入容器</h3><p>下面我先下载一个kali Linux容器<br>命令</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker pull kalilinux/kali-linux-docker</span><br></pre></td></tr></table></figure>
<p>可以<code>docker images</code>命令查看下载好的镜像<br><img src="https://gitee.com/wZass/zp/raw/master/img/20201210083632.png"></p>
<p><strong>启动和进入容器</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker run --name kali -it -p 5555:22  a1765e8e381e /bin/bash</span><br></pre></td></tr></table></figure>
<p><code>--name</code> 容器名称：指定容器的名称<br><code>-it</code>    交互方法运行  主机可以进入<br><code>-p</code> 宿主机端口:容器端口：为了映射当前Linux端口和容器端口 ，他还有个<code>-P</code>他会随机指定端口<br><code>/bin/bash</code> 是运行控制台 载入容器后运行 ，docker中必须要保持一个进程的运行，要不然整个容器启动后就会马上kill itself，这个/bin/bash就表示启动容器后启动bash</p>
<p>可以看见已经进入了<br>在<br><img src="https://gitee.com/wZass/zp/raw/master/img/20201210094427.png"></p>
<h2 id="常用命令"><a href="#常用命令" class="headerlink" title="常用命令"></a>常用命令</h2><table>
<thead>
<tr>
<th align="center">参数</th>
<th align="right">作用</th>
</tr>
</thead>
<tbody><tr>
<td align="center"><code>top</code></td>
<td align="right">查看容器里的进程</td>
</tr>
<tr>
<td align="center"><code>cp</code></td>
<td align="right">叫物理机文件复制容器里面</td>
</tr>
<tr>
<td align="center"><code>inspect</code></td>
<td align="right">查看容器的信息</td>
</tr>
<tr>
<td align="center"><code>history</code></td>
<td align="right">查看镜像是怎么做的</td>
</tr>
</tbody></table>
<h3 id="查看容器里的进程"><a href="#查看容器里的进程" class="headerlink" title="查看容器里的进程"></a>查看容器里的进程</h3><p>命令</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker  top 容器ID</span><br></pre></td></tr></table></figure>
<p><img src="https://gitee.com/wZass/zp/raw/master/img/20201210114405.png"></p>
<h3 id="容器和物理机传输文件"><a href="#容器和物理机传输文件" class="headerlink" title="容器和物理机传输文件"></a>容器和物理机传输文件</h3><p>叫物理机文件复制容器里面<br>命令</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker cp 文件名称 容器id:容器内部路径</span><br></pre></td></tr></table></figure>

<p>实咧<br>命令</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker cp /root/get-pip.py 702e50cf2295:/root/get-pip.py </span><br></pre></td></tr></table></figure>
<p>可以看见已经叫get-pip.py复制到容器的里面<br><img src="https://gitee.com/wZass/zp/raw/master/img/20201210114828.png"></p>
<p>叫容器里面文件复制物理机<br>命令</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker cp   容器id:容器内部路径  路径文件名称</span><br></pre></td></tr></table></figure>

<h3 id="查看容器的信息"><a href="#查看容器的信息" class="headerlink" title="查看容器的信息"></a>查看容器的信息</h3><p>命令</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker inspect  容器ID</span><br></pre></td></tr></table></figure>
<p><img src="https://gitee.com/wZass/zp/raw/master/img/20201210115754.png"></p>
<h3 id="查看镜像是怎么做的"><a href="#查看镜像是怎么做的" class="headerlink" title="查看镜像是怎么做的"></a>查看镜像是怎么做的</h3><p>命令</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker history  镜像ID</span><br></pre></td></tr></table></figure>
<p><img src="https://gitee.com/wZass/zp/raw/master/img/20201211114552.png"></p>
<h2 id="Portaine可视化面板安装"><a href="#Portaine可视化面板安装" class="headerlink" title="Portaine可视化面板安装"></a>Portaine可视化面板安装</h2><h3 id="下载Portaine"><a href="#下载Portaine" class="headerlink" title="下载Portaine"></a>下载Portaine</h3><p>命令</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker pull portainer/portainer</span><br></pre></td></tr></table></figure>
<p><img src="https://gitee.com/wZass/zp/raw/master/img/20201210144344.png"></p>
<h3 id="创建Portainer容器"><a href="#创建Portainer容器" class="headerlink" title="创建Portainer容器"></a>创建Portainer容器</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker run -d -p 8080:9000 --restart=always -v /var/run/docker.sock:/var/run/docker.sock --name prtainer  portainer/portainer</span><br></pre></td></tr></table></figure>
<p>命令的意思<br><code>-d</code>    代表后台运行容器<br><code>-p</code>    为了映射当前Linux端口和容器端口，开启的是物理机的8080访问的是容器的9000 端口<br>启动的是<code>portainer/portainer</code>镜像</p>
<p><img src="https://gitee.com/wZass/zp/raw/master/img/20201210144416.png"></p>
<p>端口已经打开了</p>
<p><img src="https://gitee.com/wZass/zp/raw/master/img/20201210144524.png"></p>
<h3 id="访问Portainer容器进行web管理"><a href="#访问Portainer容器进行web管理" class="headerlink" title="访问Portainer容器进行web管理"></a>访问Portainer容器进行web管理</h3><p>上面那个启动的物理机的8080我们就可以访问物理机的8080端口<br>命令</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http://物理机IP:8080</span><br></pre></td></tr></table></figure>
<p><img src="https://gitee.com/wZass/zp/raw/master/img/20201210144829.png"></p>
<p>然后我们就可以设置密码了<br><img src="https://gitee.com/wZass/zp/raw/master/img/20201210150341.png"></p>
<p><img src="https://gitee.com/wZass/zp/raw/master/img/20201210150855.png"><br>下面这个我进行了谷歌翻译<br><img src="https://gitee.com/wZass/zp/raw/master/img/20201210151042.png"></p>
<h2 id="镜像原理之联合文件系统"><a href="#镜像原理之联合文件系统" class="headerlink" title="镜像原理之联合文件系统"></a>镜像原理之联合文件系统</h2><p><strong>复制与<a target="_blank" rel="noopener" href="https://blog.csdn.net/Saker__/article/details/107629736#_384">https://blog.csdn.net/Saker__/article/details/107629736#_384</a></strong></p>
<h3 id="UnionFS（联合文件系统）"><a href="#UnionFS（联合文件系统）" class="headerlink" title="UnionFS（联合文件系统）"></a>UnionFS（联合文件系统）</h3><ul>
<li>UnionFs（联合文件系统）：Union文件系统（UnionFs）是一种分层、轻量级并且高性能的文件系统，他支持对文件系统的修改作为一次提交来一层层的叠加，同时可以将不同目录挂载到同一个虚拟文件系统下（ unite several directories into a single virtual filesystem)。Union文件系统是 Docker镜像的基础。镜像可以通过分层来进行继承，基于基础镜像（没有父镜像），可以制作各种具体的应用镜像</li>
<li>特性：一次同时加载多个文件系统，但从外面看起来，只能看到一个文件系统，联合加载会把各层文件系统叠加起来，这样最终的文件系统会包含所有底层的文件和目录</li>
</ul>
<h3 id="Docker镜像加载原理"><a href="#Docker镜像加载原理" class="headerlink" title="Docker镜像加载原理"></a>Docker镜像加载原理</h3><ul>
<li>docker的镜像实际上由一层一层的文件系统组成，这种层级的文件系统UnionFS。</li>
<li>bootfs（boot ilesystem）主要包含bootloader和kerne，bootloader主要是引导加载kernel，Linux刚启动时会加载bootfs文件系统，在Docker镜像的最底层是bootfs。这一层与我们典型的Linux/Unix系统是一样的，包含boot加载器和内核。当boot加载完成之后整个内核就都在内存中了，此时内存的使用权已由botfs转交给内核，此时系统也会卸载bootfs。[个人理解：bootfs用于开机，rootfs用于命令。]</li>
<li>rootfs（root file system），在bootfs之上。包含的就是典型Linux系统中的/de，/proc，/bin，/etc等标准目录和文件。roots就是各种不同的操作系统发行版，比如Ubuntu，Centos等等。</li>
</ul>
<p><strong>为什么虚拟机很大，Docker很小？</strong><br><strong>对于一个精简的OS，rootfs可以很小，只需要包含最基本的命令，工具和程序库就可以了，因为底层直接用Host的kernel，自己只需要提供rootfs就可以了。由此可见对于不同的linux发行版， bootfs基本是一致的，rootfs会有差别，因此不同的发行版可以公用bootfs。</strong><br><strong>虚拟机是分钟级别，容器是秒级!</strong></p>
<h3 id="分层原理"><a href="#分层原理" class="headerlink" title="分层原理"></a>分层原理</h3><p>所有的Docker┌镜像都起始于一个基础镜像层，当进行修改或增加新的内容时，就会在当前镜像层之上，创建新的镜像层。<br>举一个简单的例子，假如基于UbuntuLinux16.04创建一个新的镜像，这就是新镜像的第一层;如果在该镜像中添加Python包，就会在基础镜像层之上创建第二个镜像层;如果继续添加一个安全补丁，就会创建第三个镜像层。<br>该镜像当前已经包含3个镜像层，如下图所示（这只是一个用于演示的很简单的例子）。</p>
<p><img src="https://gitee.com/wZass/zp/raw/master/img/2020090520471054.png"></p>
<p>在添加额外的镜像层的同时，镜像始终保持是当前所有镜像的组合，理解这一点非常重要。下图中举了一个简单的例子，每个镜像层包含3个文件，而镜像包含了来自两个镜像层的6个文件。<br><img src="https://gitee.com/wZass/zp/raw/master/img/20200905204721901.png"><br>上图中的镜像层跟之前图中的略有区别，主要目的是便于展示文件。<br>下图中展示了一个稍微复杂的三层镜像，在外部看来整个镜像只有6个文件，这是因为最上层中的文件7是文件5的一个更新版本<br><img src="https://gitee.com/wZass/zp/raw/master/img/20200905204732895.png"></p>
<p>这种情况下，上层镜像层中的文件覆盖了底层镜像层中的文件。这样就使得文件的更新版本作为一个新镜像层添加到镜像当中。<br>Docker通过存储引擎（新版本采用快照机制）的方式来实现镜像层堆栈，并保证多镜像层对外展示为统一的文件系统。<br>Linux上可用的存储引擎有AUFS、Overlay2、Device Mapper、Btrfs以及ZFS。顾名思义，每种存储引擎都基于Linux中对应的文件系统或者块设备技术，并且每种存储引擎都有其独有的性能特点。<br>Docker在Windows上仅支持windowsfiter一种存储引擎，该引擎基于NTFS文件系统之上实现了分层和CoW【1】.<br>下图展示了与系统显示相同的三层镜像。所有镜像层堆叠并合并，对外提供统一的视图。</p>
<p><img src="https://gitee.com/wZass/zp/raw/master/img/20200905204745980.png"></p>
<h2 id="容器数据卷"><a href="#容器数据卷" class="headerlink" title="容器数据卷"></a>容器数据卷</h2><h3 id="什么是数据卷"><a href="#什么是数据卷" class="headerlink" title="什么是数据卷"></a>什么是数据卷</h3><p>数据卷：将宿主机的一个目录映射到容器的一个目录中<br>我们想叫容器有的数据同步在本地上，容器和本地之间可以共享数据，这个就是数据卷<br>简单理解就是比如vm虚拟机下载的文件下载到本地共享文件夹里面，我们删除虚拟机本地共享文件夹里面的下载文件还在</p>
<h3 id="容器目录映射-v参数"><a href="#容器目录映射-v参数" class="headerlink" title="容器目录映射-v参数"></a>容器目录映射-v参数</h3><p>上面有一个<code>-p  5555:22</code>是叫本地端口映射到容器的22端口上<br>我们就可以用-v进行文件映射<code>-v 主机目录:容器目录</code><br>列如下面这个<br>就会吧主机目录映射到容器目录里面</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker run   -v 主机目录:容器目录    镜像的ID/镜像名称:版本号  /bin/bash</span><br></pre></td></tr></table></figure>
<p>还可以设置权限<br><code>ro</code>意思是只读意思</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker run   -v 主机目录:容器目录:ro    镜像的ID/镜像名称:版本号  /bin/bash</span><br></pre></td></tr></table></figure>

<h4 id="容器和物理机目录映射"><a href="#容器和物理机目录映射" class="headerlink" title="容器和物理机目录映射"></a>容器和物理机目录映射</h4><p>在物理机里面创建一个<code>a</code>文件夹<br><img src="https://gitee.com/wZass/zp/raw/master/img/20201210183121.png"></p>
<p>命令</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cker run --name kali2  -it   -v  /root/a:/root/b  a1765e8e381e   /bin/bash </span><br></pre></td></tr></table></figure>
<p><code>--name</code> 容器名称：指定容器的名称<br><code>-v</code>  知道映射主机目录和容器目录<br>启动下面这个命令他会在容器kali里面创建一个<code>b</code>文件夹<br><code>-it</code> 交互方法运行 主机可以进入<br><code>/bin/bash</code> 是运行控制台 载入容器后运行 ，docker中必须要保持一个进程的运行，要不然整个容器启动后就会马上kill itself，这个/bin/bash就表示启动容器后启动bash<br>可以看见容器里面有一个b文件<br><img src="https://gitee.com/wZass/zp/raw/master/img/20201210184535.png"></p>
<h4 id="查看他有没有映射成功"><a href="#查看他有没有映射成功" class="headerlink" title="查看他有没有映射成功"></a>查看他有没有映射成功</h4><p>容器的信息里面有他的映射信息<br>命令</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker inspect  容器ID</span><br></pre></td></tr></table></figure>
<p>可以看见映射成功<br><img src="https://gitee.com/wZass/zp/raw/master/img/20201210185650.png"></p>
<h4 id="测试看看文件同步不"><a href="#测试看看文件同步不" class="headerlink" title="测试看看文件同步不"></a>测试看看文件同步不</h4><p>在物理机里面创建一个a.txt文件<br><img src="https://gitee.com/wZass/zp/raw/master/img/20201210185824.png"></p>
<p>可以看见容器kali里面已经有了a.txt文件<br><img src="https://gitee.com/wZass/zp/raw/master/img/20201210185933.png"></p>
<p>如果我们关闭容器然后在物理机创建一个文件<br>那在容器启动后也会有那个文件</p>
<h4 id="其他的挂载"><a href="#其他的挂载" class="headerlink" title="其他的挂载"></a>其他的挂载</h4><p><strong>具名挂载</strong><br>创建数据卷<br>创建数据卷之后，默认会存放在一个目录下 /war/lib/docker/volumes/数据卷名称/_data</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker volume create 数据卷名称</span><br></pre></td></tr></table></figure>

<p>查看数据卷的详细信息</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker volume inspect 数据卷名称</span><br></pre></td></tr></table></figure>
<p>查看全部数据卷</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker volume ls</span><br></pre></td></tr></table></figure>
<p>删除数据卷</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker volume rm 数据卷名称</span><br></pre></td></tr></table></figure>
<p>应用数据卷</p>
<p>当你映射数据卷时，如果数据卷不存在，Docker会自动帮你创建，会将容器内部自带的文件，存储在默认的存放路径中</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker run -v 数据卷名称:容器内部的路径 镜像id</span><br></pre></td></tr></table></figure>

<h3 id="实咧多个容器同步挂载"><a href="#实咧多个容器同步挂载" class="headerlink" title="实咧多个容器同步挂载"></a>实咧多个容器同步挂载</h3><p>多个容器挂载会用到<code>--volumes-from</code><br>格式</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker run --name kali3  -it  --volumes-from  已经挂载的容器名     镜像的ID/镜像名称:版本号  /bin/bash</span><br></pre></td></tr></table></figure>
<p><strong>实咧</strong><br><strong>容器和物理机目录映射</strong><br>在物理机里面创建一个<code>a</code>文件夹<br><img src="https://gitee.com/wZass/zp/raw/master/img/20201210183121.png"></p>
<p>命令</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cker run --name kali2  -it   -v  /root/a:/root/b  a1765e8e381e   /bin/bash </span><br></pre></td></tr></table></figure>
<p><code>--name</code> 容器名称：指定容器的名称<br><code>-v</code>  知道映射主机目录和容器目录<br>启动下面这个命令他会在容器kali里面创建一个<code>b</code>文件夹<br><code>-it</code> 交互方法运行 主机可以进入<br><code>/bin/bash</code> 是运行控制台 载入容器后运行 ，docker中必须要保持一个进程的运行，要不然整个容器启动后就会马上kill itself，这个/bin/bash就表示启动容器后启动bash<br>可以看见容器里面有一个b文件<br><img src="https://gitee.com/wZass/zp/raw/master/img/20201210184535.png"></p>
<p><strong>测试看看文件同步不</strong><br>在物理机里面创建一个a.txt文件<br><img src="https://gitee.com/wZass/zp/raw/master/img/20201210185824.png"></p>
<p>可以看见容器kali里面已经有了a.txt文件<br><img src="https://gitee.com/wZass/zp/raw/master/img/20201210185933.png"></p>
<p><strong>我在创建一个kali3的容器然后在叫这新个容器用<code>--volumes-from</code>挂载在哪个已经挂载挂数据卷物理机的kali2上面</strong><br><strong>这样就实现多个容器同步了</strong></p>
<p>命令</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker run --name kali3  -it  --volumes-from  kali2   a1765e8e381e   /bin/bash</span><br></pre></td></tr></table></figure>
<p>可以看见在kali3也是同步了<br><img src="https://gitee.com/wZass/zp/raw/master/img/20201210201019.png"></p>
<p>如果kali2容器删除了，那kali3也会正常同步的</p>
<h2 id="commit参数容器变成镜像"><a href="#commit参数容器变成镜像" class="headerlink" title="commit参数容器变成镜像"></a>commit参数容器变成镜像</h2><p>我的这个kali已经添加和下载了很到东西，我叫我的这个kali的容器进行生成镜像，就和vm快照差不多<br>比如我们的用的镜像好用我们就可以叫容器打包成镜像<br>命令</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker commit -m=&quot;提交的描述信息&quot; -a=&quot;作者&quot; 容器id  制作出来的镜像名:他的版本号</span><br></pre></td></tr></table></figure>
<h3 id="实咧"><a href="#实咧" class="headerlink" title="实咧"></a>实咧</h3><p>查看一下kali容器号<br>命令</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker ps</span><br></pre></td></tr></table></figure>
<p>容器号是<code>702e50cf2295</code><br><img src="https://gitee.com/wZass/zp/raw/master/img/20201210164428.png"><br>命令</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker commit -m=&quot;kali&quot; -a=&quot;abc&quot; 702e50cf2295  kalilinux2:1.0 </span><br></pre></td></tr></table></figure>
<p>成功<br><img src="https://gitee.com/wZass/zp/raw/master/img/20201210164600.png"><br>我们查看一下进行，出来了一个kalinux2的镜像大小比原来的多0.3g<br>这个镜像我们直接就可以用了，<br><img src="https://gitee.com/wZass/zp/raw/master/img/20201210164647.png"></p>
<h2 id="定义自己的镜像"><a href="#定义自己的镜像" class="headerlink" title="定义自己的镜像"></a>定义自己的镜像</h2><h3 id="Dockerfile的命令"><a href="#Dockerfile的命令" class="headerlink" title="Dockerfile的命令"></a>Dockerfile的命令</h3><p>他的命令记住必须大写</p>
<table>
<thead>
<tr>
<th align="center">命令</th>
<th align="right">作用</th>
</tr>
</thead>
<tbody><tr>
<td align="center"><code>FROM</code></td>
<td align="right">基础镜像信息，一切从这里开始</td>
</tr>
<tr>
<td align="center"><code>MAINTAINER</code></td>
<td align="right">作者的信息 ，姓名+邮箱</td>
</tr>
<tr>
<td align="center"><code>RUN</code></td>
<td align="right">镜像运行的时候需要运行的命令</td>
</tr>
<tr>
<td align="center"><code>ADD</code></td>
<td align="right">一个复制命令，把文件复制到镜像中</td>
</tr>
<tr>
<td align="center"><code>WORKDIR</code></td>
<td align="right">镜像的工作目录</td>
</tr>
<tr>
<td align="center"><code>VOLUME</code></td>
<td align="right">挂载的目录，可以将文件夹或者其他容器种得文件夹挂在到这个容器种</td>
</tr>
<tr>
<td align="center"><code>EXPOSE</code></td>
<td align="right">功能为暴漏容器运行时的监听端口给外部，和-P差不多</td>
</tr>
<tr>
<td align="center"><code>CMD</code></td>
<td align="right">功能为容器启动时要运行的命令</td>
</tr>
<tr>
<td align="center"><code>ENTRYPOINT</code></td>
<td align="right">功能是启动时的默认命令</td>
</tr>
<tr>
<td align="center"><code>ONBUILD</code></td>
<td align="right">触发命令，构建一个被继承Dockerfile，会触发ONBUILD的命令</td>
</tr>
<tr>
<td align="center"><code>COPY</code></td>
<td align="right">类似ADD，文件拷贝到镜像中</td>
</tr>
<tr>
<td align="center"><code>ENV</code></td>
<td align="right">功能为设置环境变量，就和a=10，这个a就是10一样</td>
</tr>
</tbody></table>
<h3 id="实战测试"><a href="#实战测试" class="headerlink" title="实战测试"></a>实战测试</h3><p>我们安装kali linux的里面什么都没有连<code>ifconfig</code>命令都没有还得需要自己下载<br>我想叫基本命令和ssh给添加上去</p>
<h3 id="编写Dockerfile文件"><a href="#编写Dockerfile文件" class="headerlink" title="编写Dockerfile文件"></a>编写Dockerfile文件</h3><p>我就创建一个名字是<code>own-Kali-Linux</code></p>
<p>文件内容</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">FROM  kalilinux/kali-linux-docker     </span><br><span class="line"></span><br><span class="line">MAINTAINER zhaobia&lt;2737977997@qq.com&gt;    </span><br><span class="line"></span><br><span class="line">ENV  MuLu  /use/local    </span><br><span class="line"></span><br><span class="line">WORKDIR  $MuLu      </span><br><span class="line"></span><br><span class="line">RUN  echo &quot;deb http://mirrors.ustc.edu.cn/kali kali-rolling main non-free contrib&quot;   &gt;  /etc/apt/sources.list</span><br><span class="line">RUN  apt update</span><br><span class="line">RUN  apt -y  install net-tools    </span><br><span class="line">RUN  apt -y install vim  </span><br><span class="line">RUN  apt -y  install ssh</span><br><span class="line"></span><br><span class="line">RUN   /etc/init.d/ssh  start</span><br><span class="line">EXPOSE 22</span><br><span class="line"></span><br><span class="line">CMD  echo &quot;------下载成功---------&quot;</span><br><span class="line">CMD  /bin/bash</span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">FROM  kalilinux/kali-linux-docker     #基础镜像信息，一切从这里开始</span><br><span class="line"></span><br><span class="line">MAINTAINER zhaobia&lt;2737977997@qq.com&gt;     #作者的信息 ，姓名+邮箱 </span><br><span class="line"></span><br><span class="line">ENV  MuLu  /use/local    #这个就是叫Mulu就是个变量，他就是/use/local </span><br><span class="line"></span><br><span class="line">WORKDIR  $MuLu      #镜像的工作目录就是我们进入镜像就进入指定的目录  $MuLu就是上面的变量</span><br><span class="line"></span><br><span class="line">#下面都是在kalilinux/kali-linux-docker镜像里面运行的命令</span><br><span class="line">#这个是更换一下源</span><br><span class="line">RUN   echo &quot;deb http://mirrors.ustc.edu.cn/kali kali-rolling main non-free contrib&quot;  &gt;  /etc/apt/sources.list</span><br><span class="line">#下面都是下载一些东西,如果不加y他就报错了</span><br><span class="line">RUN  apt update</span><br><span class="line">RUN  apt -y  install net-tools    </span><br><span class="line">RUN  apt -y install vim  </span><br><span class="line">RUN  apt -y  install ssh</span><br><span class="line">RUN   /etc/init.d/ssh  start</span><br><span class="line"></span><br><span class="line">#映射容器内的22端口</span><br><span class="line">EXPOSE 22</span><br><span class="line"></span><br><span class="line">#CMD功能为容器启动时要运行的命令</span><br><span class="line">CMD  echo &quot;------下载成功---------&quot;</span><br><span class="line">CMD  /bin/bash</span><br></pre></td></tr></table></figure>
<p><img src="https://gitee.com/wZass/zp/raw/master/img/20201211112320.png"></p>
<h3 id="通过文件构建镜像"><a href="#通过文件构建镜像" class="headerlink" title="通过文件构建镜像"></a>通过文件构建镜像</h3><p>构建镜像用<code>build</code>参数进行构建<br>格式<br>后面有一个<code>.</code></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker build -f 编写的Dockerfile文件名 -t  镜像名字:版本 . </span><br></pre></td></tr></table></figure>
<p><strong>用上面的<code>own-Kali-Linux</code>文件构建成镜像</strong><br>命令</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker build -f own-Kali-Linux -t  kalilinux:1.0 .  </span><br></pre></td></tr></table></figure>
<p>可以这样就可以进行执行自己写的命令了<br><img src="https://gitee.com/wZass/zp/raw/master/img/20201211112734.png"></p>
<p>用命令<code>docker images</code>查看一下镜像可以看见有一个名kalilinux版本1.0的kali<br><img src="https://gitee.com/wZass/zp/raw/master/img/20201211112918.png"></p>
<h3 id="测试自己定义的镜像"><a href="#测试自己定义的镜像" class="headerlink" title="测试自己定义的镜像"></a>测试自己定义的镜像</h3><p>用自己定义的镜像启动容器</p>
<p>命令</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker run  -it 77319bf090e7  /bin/bash</span><br></pre></td></tr></table></figure>
<p><img src="https://gitee.com/wZass/zp/raw/master/img/20201211113633.png"></p>
<p>我们看一下我在<code>own-Kali-Linux</code>里面指定的命令已经被直接了<br>安装了<code>net-tools，vim，ssh</code><br>可以看见已经被安装了<br><img src="https://gitee.com/wZass/zp/raw/master/img/20201211114102.png"></p>
<h3 id="查看镜像是怎么做的-1"><a href="#查看镜像是怎么做的-1" class="headerlink" title="查看镜像是怎么做的"></a>查看镜像是怎么做的</h3><p>命令</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker history  镜像ID</span><br></pre></td></tr></table></figure>
<p><img src="https://gitee.com/wZass/zp/raw/master/img/20201211114552.png"></p>
<h3 id="CMD和ENTRYPOINT的区别"><a href="#CMD和ENTRYPOINT的区别" class="headerlink" title="CMD和ENTRYPOINT的区别"></a>CMD和ENTRYPOINT的区别</h3><h4 id="CMD执行的命令"><a href="#CMD执行的命令" class="headerlink" title="CMD执行的命令"></a>CMD执行的命令</h4><p>制作一个镜像文件</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">FROM  centos</span><br><span class="line">CMD [&#x27;ls&#x27;,&#x27;-a&#x27;]</span><br></pre></td></tr></table></figure>
<p>可以看见直接到时候就运行了<code>ls -a</code>命令<br><img src="https://gitee.com/wZass/zp/raw/master/img/20201211115255.png"><br>如果启动的时候启动添加命令他就会报错<br><img src="https://gitee.com/wZass/zp/raw/master/img/20201211115648.png"></p>
<h4 id="ENTRYPOINT执行的命令"><a href="#ENTRYPOINT执行的命令" class="headerlink" title="ENTRYPOINT执行的命令"></a>ENTRYPOINT执行的命令</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">FROM  centos</span><br><span class="line">ENTRYPOINT [&#x27;ls&#x27;,&#x27;-a&#x27;]</span><br></pre></td></tr></table></figure>
<p>可以看见直接到时候就运行了<code>ls -a</code>命令<br><img src="https://gitee.com/wZass/zp/raw/master/img/20201211115255.png"><br>如果启动的时候启动添加命令他就没有报错<br><img src="https://gitee.com/wZass/zp/raw/master/img/20201211115815.png"></p>
<h4 id="他两个的区别"><a href="#他两个的区别" class="headerlink" title="他两个的区别"></a>他两个的区别</h4><p><code>CMD</code>如果启动的时候启动添加命令他就会报错<br><img src="https://gitee.com/wZass/zp/raw/master/img/20201211115648.png"><br><code>ENTRYPOINT</code>如果启动的时候启动添加命令他就没有报错<br><img src="https://gitee.com/wZass/zp/raw/master/img/20201211115815.png"></p>
<h2 id="上发镜像中央仓库上"><a href="#上发镜像中央仓库上" class="headerlink" title="上发镜像中央仓库上"></a>上发镜像中央仓库上</h2><p>地址<a target="_blank" rel="noopener" href="https://hub.docker.com/">https://hub.docker.com/</a></p>
<h3 id="登录仓库上"><a href="#登录仓库上" class="headerlink" title="登录仓库上"></a>登录仓库上</h3><p>命令<br>回车之后就叫你输入密码了</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker login  -u 用户 回车</span><br></pre></td></tr></table></figure>
<h3 id="提交镜像"><a href="#提交镜像" class="headerlink" title="提交镜像"></a>提交镜像</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker push  镜像名或者镜像ID:版本号</span><br></pre></td></tr></table></figure>

<h2 id="Docker-Compose"><a href="#Docker-Compose" class="headerlink" title="Docker-Compose"></a>Docker-Compose</h2><h3 id="什么是Docker-Compose-简介"><a href="#什么是Docker-Compose-简介" class="headerlink" title="什么是Docker-Compose 简介"></a>什么是Docker-Compose 简介</h3><p>Compose 是用于定义和运行多容器 Docker 应用程序的工具。通过 Compose，您可以使用 YML 文件来配置应用程序需要的所有服务。然后，使用一个命令，就可以从 YML 文件配置中创建并启动所有服务。</p>
<h3 id="下载Docker-Compose"><a href="#下载Docker-Compose" class="headerlink" title="下载Docker-Compose"></a>下载Docker-Compose</h3><p>在kali下载命令是</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">apt install  docker-compose</span><br></pre></td></tr></table></figure>
<p>其他linux系统如果没有可以在github上下载地址<a href="https://github.com/docker/compose/releases">https://github.com/docker/compose/releases</a></p>
<p>出现下面这个就下载成功了<br><img src="https://gitee.com/wZass/zp/raw/master/img/20201211162358.png"></p>
<h3 id="Docker-Compose编写"><a href="#Docker-Compose编写" class="headerlink" title="Docker-Compose编写"></a>Docker-Compose编写</h3><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">version:&#x27;3.1&#x27;</span></span><br><span class="line"><span class="attr">services:</span></span><br><span class="line">  <span class="attr">mysql:</span>                     <span class="comment"># 服务的名称</span></span><br><span class="line">    <span class="attr">restart:</span> <span class="string">always</span>          <span class="comment"># 代表只要Docker启动，那么这个容器就跟着一起启动</span></span><br><span class="line">    <span class="attr">image:</span> <span class="string">daocloud.io/library/mysql:5.7.4</span>     <span class="comment"># 指定镜像路径</span></span><br><span class="line">    <span class="attr">container_name:</span> <span class="string">mysql</span>    <span class="comment"># 指定容器名称</span></span><br><span class="line">    <span class="attr">ports:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="number">3306</span><span class="string">:3306</span>        <span class="comment"># 指定端口号的映射</span></span><br><span class="line">    <span class="attr">environment:</span></span><br><span class="line">      <span class="attr">MYSQL_ROOT_PASSWORD:</span> <span class="string">root</span>         <span class="comment"># 指定MySQL的ROOT用户登录密码</span></span><br><span class="line">      <span class="attr">TZ:</span> <span class="string">Asia/Shanghai</span>                 <span class="comment"># 指定时区</span></span><br><span class="line">    <span class="attr">volumes:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">/opt/docker_mysql-tomcat/mysql_data:/var/lib/mysql</span>        <span class="comment"># 映射数据卷</span></span><br><span class="line">  <span class="attr">tomcat:</span></span><br><span class="line">    <span class="attr">restart:</span> <span class="string">always</span>          <span class="comment"># 代表只要Docker启动，那么这个容器就跟着一起启动</span></span><br><span class="line">    <span class="attr">image:</span> <span class="string">daocloud.io/library/tomcat:8.5.15-jre8</span>     <span class="comment"># 指定镜像路径</span></span><br><span class="line">    <span class="attr">container_name:</span> <span class="string">tomcat</span>    <span class="comment"># 指定容器名称</span></span><br><span class="line">    <span class="attr">ports:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="number">8080</span><span class="string">:8080</span>        <span class="comment"># 指定端口号的映射</span></span><br><span class="line">    <span class="attr">environment:</span></span><br><span class="line">      <span class="attr">MYSQL_ROOT_PASSWORD:</span> <span class="string">root</span>         <span class="comment"># 指定MySQL的ROOT用户登录密码</span></span><br><span class="line">      <span class="attr">TZ:</span> <span class="string">Asia/Shanghai</span>                 <span class="comment"># 指定时区</span></span><br><span class="line">    <span class="attr">volumes:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">/opt/docker_mysql-tomcat/tomcat_webapps:/usr/local/tomcat/webapps</span>        <span class="comment"># 映射数据卷</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">/opt/docker_mysql-tomcat/tomcat_logs:/usr/local/tomcat/logs</span>        <span class="comment"># 映射数据卷</span></span><br></pre></td></tr></table></figure>


<p>可以看这个地址<a target="_blank" rel="noopener" href="https://www.runoob.com/docker/docker-compose.html">https://www.runoob.com/docker/docker-compose.html</a></p>
<h3 id="命令"><a href="#命令" class="headerlink" title="命令"></a>命令</h3><p><strong>基于docker-compose.yml启动管理的容器</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker-compose up -d</span><br></pre></td></tr></table></figure>
<p><img src="https://gitee.com/wZass/zp/raw/master/img/20201211165004.png"><br><strong>关闭并删除容器</strong></p>
</article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta">文章作者: </span><span class="post-copyright-info"><a href="mailto:undefined">John Doe</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta">文章链接: </span><span class="post-copyright-info"><a href="https://github.com/Zhao-sai-sai/Blog-test.github.io.git/2020/12/16/Docker%E7%9A%84%E5%AD%A6%E4%B9%A0/">https://github.com/Zhao-sai-sai/Blog-test.github.io.git/2020/12/16/Docker%E7%9A%84%E5%AD%A6%E4%B9%A0/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta">版权声明: </span><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来自 <a href="https://github.com/Zhao-sai-sai/Blog-test.github.io.git" target="_blank">Hexo</a>！</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/Zhao-sai-sai/Blog-test.github.io.git/tags/Docker/">Docker</a></div><div class="post_share"><div class="social-share" data-image="https://gitee.com/wZass/zp/raw/master/img/20201209201844.png" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/social-share.js/dist/css/share.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/social-share.js/dist/js/social-share.min.js" defer></script></div></div><nav class="pagination-post" id="pagination"><div class="prev-post pull-left"><a href="/Zhao-sai-sai/Blog-test.github.io.git/2020/12/21/kali%E5%AE%89%E8%A3%85%E8%9A%81%E5%89%91/"><img class="prev-cover" src="https://gitee.com/wZass/zp/raw/master/img/20201221091847.png" onerror="onerror=null;src='/Zhao-sai-sai/Blog-test.github.io.git/img/404.jpg'" alt="cover of previous post"><div class="pagination-info"><div class="label">上一篇</div><div class="prev_info">kali 安装蚁剑</div></div></a></div><div class="next-post pull-right"><a href="/Zhao-sai-sai/Blog-test.github.io.git/2020/12/16/MetInfo4.0%E4%BB%BB%E6%84%8F%E7%94%A8%E6%88%B7%E5%AF%86%E7%A0%81%E4%BF%AE%E6%94%B9%E6%BC%8F%E6%B4%9E%E5%A4%8D%E7%8E%B0/"><img class="next-cover" src="https://gitee.com/wZass/zp/raw/master/img/20201216131324.png" onerror="onerror=null;src='/Zhao-sai-sai/Blog-test.github.io.git/img/404.jpg'" alt="cover of next post"><div class="pagination-info"><div class="label">下一篇</div><div class="next_info">MetInfo4.0任意用户密码修改漏洞复现</div></div></a></div></nav></div><div class="aside-content" id="aside-content"><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>目录</span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BB%80%E4%B9%88%E6%98%AFDocker"><span class="toc-number">1.</span> <span class="toc-text">什么是Docker</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Docker%E4%B8%8E%E8%99%9A%E6%8B%9F%E6%9C%BA%E7%9A%84%E5%8C%BA%E5%88%AB"><span class="toc-number">2.</span> <span class="toc-text">Docker与虚拟机的区别</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Docker%E7%9A%84%E5%AE%89%E8%A3%85"><span class="toc-number">3.</span> <span class="toc-text">Docker的安装</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Docker%E7%9A%84%E5%8D%B8%E8%BD%BD"><span class="toc-number">4.</span> <span class="toc-text">Docker的卸载</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%90%AF%E5%8A%A8Docker"><span class="toc-number">5.</span> <span class="toc-text">启动Docker</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Docker-%E9%95%9C%E5%83%8F%E5%8A%A0%E9%80%9F"><span class="toc-number">6.</span> <span class="toc-text">Docker 镜像加速</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#docker%E9%95%9C%E5%83%8F%E5%9F%BA%E7%A1%80%E5%91%BD%E4%BB%A4"><span class="toc-number">7.</span> <span class="toc-text">docker镜像基础命令</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#pull%E4%B8%8B%E8%BD%BD%E9%95%9C%E5%83%8F"><span class="toc-number">7.1.</span> <span class="toc-text">pull下载镜像</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#rmi%E5%8D%B8%E8%BD%BD%E9%95%9C%E5%83%8F"><span class="toc-number">7.2.</span> <span class="toc-text">rmi卸载镜像</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#images%E6%9F%A5%E7%9C%8B%E5%B7%B2%E7%BB%8F%E4%B8%8B%E8%BD%BD%E7%9A%84%E9%95%9C%E5%83%8F"><span class="toc-number">7.3.</span> <span class="toc-text">images查看已经下载的镜像</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#search%E8%BF%9B%E8%A1%8C%E6%90%9C%E7%B4%A2%E9%95%9C%E5%83%8F"><span class="toc-number">7.4.</span> <span class="toc-text">search进行搜索镜像</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%95%9C%E5%83%8F%E7%9A%84%E5%AF%BC%E5%85%A5%E5%AF%BC%E5%87%BA"><span class="toc-number">7.5.</span> <span class="toc-text">镜像的导入导出</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E9%95%9C%E5%83%8F%E7%9A%84%E5%AF%BC%E5%87%BA%E3%80%81"><span class="toc-number">7.5.1.</span> <span class="toc-text">镜像的导出、</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E9%95%9C%E5%83%8F%E7%9A%84%E5%AF%BC%E5%85%A5"><span class="toc-number">7.5.2.</span> <span class="toc-text">镜像的导入</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BF%AE%E6%94%B9%E9%95%9C%E5%83%8F%E4%BF%A1%E6%81%AF"><span class="toc-number">7.6.</span> <span class="toc-text">修改镜像信息</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#docker%E5%AE%B9%E5%99%A8%E7%9A%84%E5%91%BD%E4%BB%A4"><span class="toc-number">8.</span> <span class="toc-text">docker容器的命令</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%AE%80%E5%8D%95%E8%BF%90%E8%A1%8C"><span class="toc-number">8.1.</span> <span class="toc-text">简单运行</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%BF%90%E8%A1%8C%E5%B8%B8%E7%94%A8%E7%9A%84%E5%8F%82%E6%95%B0"><span class="toc-number">8.2.</span> <span class="toc-text">运行常用的参数</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%9F%A5%E7%9C%8B%E6%AD%A3%E5%9C%A8%E8%BF%90%E8%A1%8C%E7%9A%84%E5%AE%B9%E5%99%A8"><span class="toc-number">8.3.</span> <span class="toc-text">查看正在运行的容器</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%BF%9B%E5%85%A5%E5%AE%B9%E5%99%A8"><span class="toc-number">8.4.</span> <span class="toc-text">进入容器</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%80%80%E5%87%BA%E5%AE%B9%E5%99%A8"><span class="toc-number">8.5.</span> <span class="toc-text">退出容器</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%90%AF%E5%8A%A8%E5%92%8C%E5%85%B3%E9%97%AD%E5%AE%B9%E5%99%A8"><span class="toc-number">8.6.</span> <span class="toc-text">启动和关闭容器</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%88%A0%E9%99%A4%E5%AE%B9%E5%99%A8"><span class="toc-number">8.7.</span> <span class="toc-text">删除容器</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%9F%A5%E7%9C%8B%E6%97%A5%E5%BF%97"><span class="toc-number">8.8.</span> <span class="toc-text">查看日志</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AE%9E%E5%92%A7%E4%B8%8B%E8%BD%BD%E5%92%8C%E8%BF%90%E8%A1%8C%E5%8A%A0%E8%BF%9B%E5%85%A5%E5%AE%B9%E5%99%A8"><span class="toc-number">8.9.</span> <span class="toc-text">实咧下载和运行加进入容器</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4"><span class="toc-number">9.</span> <span class="toc-text">常用命令</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%9F%A5%E7%9C%8B%E5%AE%B9%E5%99%A8%E9%87%8C%E7%9A%84%E8%BF%9B%E7%A8%8B"><span class="toc-number">9.1.</span> <span class="toc-text">查看容器里的进程</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AE%B9%E5%99%A8%E5%92%8C%E7%89%A9%E7%90%86%E6%9C%BA%E4%BC%A0%E8%BE%93%E6%96%87%E4%BB%B6"><span class="toc-number">9.2.</span> <span class="toc-text">容器和物理机传输文件</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%9F%A5%E7%9C%8B%E5%AE%B9%E5%99%A8%E7%9A%84%E4%BF%A1%E6%81%AF"><span class="toc-number">9.3.</span> <span class="toc-text">查看容器的信息</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%9F%A5%E7%9C%8B%E9%95%9C%E5%83%8F%E6%98%AF%E6%80%8E%E4%B9%88%E5%81%9A%E7%9A%84"><span class="toc-number">9.4.</span> <span class="toc-text">查看镜像是怎么做的</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Portaine%E5%8F%AF%E8%A7%86%E5%8C%96%E9%9D%A2%E6%9D%BF%E5%AE%89%E8%A3%85"><span class="toc-number">10.</span> <span class="toc-text">Portaine可视化面板安装</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%B8%8B%E8%BD%BDPortaine"><span class="toc-number">10.1.</span> <span class="toc-text">下载Portaine</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%88%9B%E5%BB%BAPortainer%E5%AE%B9%E5%99%A8"><span class="toc-number">10.2.</span> <span class="toc-text">创建Portainer容器</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%AE%BF%E9%97%AEPortainer%E5%AE%B9%E5%99%A8%E8%BF%9B%E8%A1%8Cweb%E7%AE%A1%E7%90%86"><span class="toc-number">10.3.</span> <span class="toc-text">访问Portainer容器进行web管理</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E9%95%9C%E5%83%8F%E5%8E%9F%E7%90%86%E4%B9%8B%E8%81%94%E5%90%88%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F"><span class="toc-number">11.</span> <span class="toc-text">镜像原理之联合文件系统</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#UnionFS%EF%BC%88%E8%81%94%E5%90%88%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F%EF%BC%89"><span class="toc-number">11.1.</span> <span class="toc-text">UnionFS（联合文件系统）</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Docker%E9%95%9C%E5%83%8F%E5%8A%A0%E8%BD%BD%E5%8E%9F%E7%90%86"><span class="toc-number">11.2.</span> <span class="toc-text">Docker镜像加载原理</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%88%86%E5%B1%82%E5%8E%9F%E7%90%86"><span class="toc-number">11.3.</span> <span class="toc-text">分层原理</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%AE%B9%E5%99%A8%E6%95%B0%E6%8D%AE%E5%8D%B7"><span class="toc-number">12.</span> <span class="toc-text">容器数据卷</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BB%80%E4%B9%88%E6%98%AF%E6%95%B0%E6%8D%AE%E5%8D%B7"><span class="toc-number">12.1.</span> <span class="toc-text">什么是数据卷</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AE%B9%E5%99%A8%E7%9B%AE%E5%BD%95%E6%98%A0%E5%B0%84-v%E5%8F%82%E6%95%B0"><span class="toc-number">12.2.</span> <span class="toc-text">容器目录映射-v参数</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%AE%B9%E5%99%A8%E5%92%8C%E7%89%A9%E7%90%86%E6%9C%BA%E7%9B%AE%E5%BD%95%E6%98%A0%E5%B0%84"><span class="toc-number">12.2.1.</span> <span class="toc-text">容器和物理机目录映射</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%9F%A5%E7%9C%8B%E4%BB%96%E6%9C%89%E6%B2%A1%E6%9C%89%E6%98%A0%E5%B0%84%E6%88%90%E5%8A%9F"><span class="toc-number">12.2.2.</span> <span class="toc-text">查看他有没有映射成功</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%B5%8B%E8%AF%95%E7%9C%8B%E7%9C%8B%E6%96%87%E4%BB%B6%E5%90%8C%E6%AD%A5%E4%B8%8D"><span class="toc-number">12.2.3.</span> <span class="toc-text">测试看看文件同步不</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%85%B6%E4%BB%96%E7%9A%84%E6%8C%82%E8%BD%BD"><span class="toc-number">12.2.4.</span> <span class="toc-text">其他的挂载</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AE%9E%E5%92%A7%E5%A4%9A%E4%B8%AA%E5%AE%B9%E5%99%A8%E5%90%8C%E6%AD%A5%E6%8C%82%E8%BD%BD"><span class="toc-number">12.3.</span> <span class="toc-text">实咧多个容器同步挂载</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#commit%E5%8F%82%E6%95%B0%E5%AE%B9%E5%99%A8%E5%8F%98%E6%88%90%E9%95%9C%E5%83%8F"><span class="toc-number">13.</span> <span class="toc-text">commit参数容器变成镜像</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AE%9E%E5%92%A7"><span class="toc-number">13.1.</span> <span class="toc-text">实咧</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%AE%9A%E4%B9%89%E8%87%AA%E5%B7%B1%E7%9A%84%E9%95%9C%E5%83%8F"><span class="toc-number">14.</span> <span class="toc-text">定义自己的镜像</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Dockerfile%E7%9A%84%E5%91%BD%E4%BB%A4"><span class="toc-number">14.1.</span> <span class="toc-text">Dockerfile的命令</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AE%9E%E6%88%98%E6%B5%8B%E8%AF%95"><span class="toc-number">14.2.</span> <span class="toc-text">实战测试</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%BC%96%E5%86%99Dockerfile%E6%96%87%E4%BB%B6"><span class="toc-number">14.3.</span> <span class="toc-text">编写Dockerfile文件</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%80%9A%E8%BF%87%E6%96%87%E4%BB%B6%E6%9E%84%E5%BB%BA%E9%95%9C%E5%83%8F"><span class="toc-number">14.4.</span> <span class="toc-text">通过文件构建镜像</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%B5%8B%E8%AF%95%E8%87%AA%E5%B7%B1%E5%AE%9A%E4%B9%89%E7%9A%84%E9%95%9C%E5%83%8F"><span class="toc-number">14.5.</span> <span class="toc-text">测试自己定义的镜像</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%9F%A5%E7%9C%8B%E9%95%9C%E5%83%8F%E6%98%AF%E6%80%8E%E4%B9%88%E5%81%9A%E7%9A%84-1"><span class="toc-number">14.6.</span> <span class="toc-text">查看镜像是怎么做的</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#CMD%E5%92%8CENTRYPOINT%E7%9A%84%E5%8C%BA%E5%88%AB"><span class="toc-number">14.7.</span> <span class="toc-text">CMD和ENTRYPOINT的区别</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#CMD%E6%89%A7%E8%A1%8C%E7%9A%84%E5%91%BD%E4%BB%A4"><span class="toc-number">14.7.1.</span> <span class="toc-text">CMD执行的命令</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#ENTRYPOINT%E6%89%A7%E8%A1%8C%E7%9A%84%E5%91%BD%E4%BB%A4"><span class="toc-number">14.7.2.</span> <span class="toc-text">ENTRYPOINT执行的命令</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%BB%96%E4%B8%A4%E4%B8%AA%E7%9A%84%E5%8C%BA%E5%88%AB"><span class="toc-number">14.7.3.</span> <span class="toc-text">他两个的区别</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%B8%8A%E5%8F%91%E9%95%9C%E5%83%8F%E4%B8%AD%E5%A4%AE%E4%BB%93%E5%BA%93%E4%B8%8A"><span class="toc-number">15.</span> <span class="toc-text">上发镜像中央仓库上</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%99%BB%E5%BD%95%E4%BB%93%E5%BA%93%E4%B8%8A"><span class="toc-number">15.1.</span> <span class="toc-text">登录仓库上</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%8F%90%E4%BA%A4%E9%95%9C%E5%83%8F"><span class="toc-number">15.2.</span> <span class="toc-text">提交镜像</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Docker-Compose"><span class="toc-number">16.</span> <span class="toc-text">Docker-Compose</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BB%80%E4%B9%88%E6%98%AFDocker-Compose-%E7%AE%80%E4%BB%8B"><span class="toc-number">16.1.</span> <span class="toc-text">什么是Docker-Compose 简介</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%B8%8B%E8%BD%BDDocker-Compose"><span class="toc-number">16.2.</span> <span class="toc-text">下载Docker-Compose</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Docker-Compose%E7%BC%96%E5%86%99"><span class="toc-number">16.3.</span> <span class="toc-text">Docker-Compose编写</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%91%BD%E4%BB%A4"><span class="toc-number">16.4.</span> <span class="toc-text">命令</span></a></li></ol></li></ol></div></div></div></div></main><footer id="footer"><div id="footer-wrap"><div class="copyright">&copy;2020 - 2021 By John Doe</div><div class="framework-info"><span>框架 </span><a target="_blank" rel="noopener" href="https://hexo.io">Hexo</a><span class="footer-separator">|</span><span>主题 </span><a href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly</a></div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="阅读模式"><i class="fas fa-book-open"></i></button><button id="font-plus" type="button" title="放大字体"><i class="fas fa-plus"></i></button><button id="font-minus" type="button" title="缩小字体"><i class="fas fa-minus"></i></button><button id="darkmode" type="button" title="浅色和深色模式转换"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside_config" type="button" title="设置"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="目录"><i class="fas fa-list-ul"></i></button><button id="go-up" type="button" title="回到顶部"><i class="fas fa-arrow-up"></i></button></div></div><div><script src="/Zhao-sai-sai/Blog-test.github.io.git/js/utils.js"></script><script src="/Zhao-sai-sai/Blog-test.github.io.git/js/main.js"></script><div class="js-pjax"></div><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script></div></body></html>